
<!doctype html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<script type="text/javascript" src="../jquery-2.1.1.js"></script>
	<title></title>
</head>
<body>

<div id="clickme">
  Click here
</div>
<img id="book"  alt="" width="100" height="123"
  style="background:red;opacity:1;position: relative; left: 500px;" />

<script type="text/javascript">
	

	// $('#clickme').click(function() {

var book = document.getElementById('book')


animate(book, {
	left: 50,
	time: 2000
})

function animate(elem, options){

	var initValue = getStyleVlaue(elem,"left")
	//动画初始值
	var start = parseFloat(initValue);
	//动画结束值
	var end = options.left
	//动画id
	var timerId;

	var createTime = function(){
		return  (+new Date)
	}

	var startTime = createTime();

	//需要执行动画的长度
	var anminLength = start - end;

	//每13毫秒要跑的位置
	var pos = anminLength/options.time * 13

	// console.log(animValue, start- end,options.time)

	var pre = start;
	var newValue;

	function tick(){		
		if(createTime() - startTime < options.time){
			newValue = pre - pos

			console.log(newValue,end)
			//动画执行
			elem.style['left'] = newValue + 'px';
			pre = newValue
		}else{
			//停止动画
			clearInterval(timerId);
			timerId = null;
		}
	}

	//开始执行动画
	var timerId = setInterval(tick, 13);
}


//获取样式属性年
function getStyleVlaue(elem,name) {
	var computed=  elem.ownerDocument.defaultView.getComputedStyle(elem, null);
	return  computed.getPropertyValue(name) || computed[name];
};


function animate1(elem, options) {

	var animation = {};

	var tick = function(){

	}

	tick.elem = elem

	tick.anim = animation

	animate.fx.timer(tick);
}


//保存需要执行的动画对象
animate.timers = [];


//开始执行动画
animate.fx = {
	timer : function(timer) {
		animate.timers.push(timer);
		if (timer()) {
			animate.fx.start();
		} else {
			animate.timers.pop();
		}
	}
}




</script>
</body>
</html>